define(["app"],function(app){app.config(["$httpProvider",function($httpProvider){var errorInterceptor=["$q","$log","$location",function($q,$log){return{request:function(config){return"GET"!==config.method||!config.url||/^template\//.test(config.url)||/^uib\/template\//.test(config.url)||(config.params=config.params||{},config.params._=/\.js$|\.html$/.test(config.url)?jrVersionStr:(new Date).getTime()),config},response:function(response){if("object"!=typeof response.data||response.data.success!==!1)return response;if("-300"===response.data.resCode)location.href="/com/login";else{if("-400"!==response.data.resCode)return"-200"===response.data.resCode?$q.reject(response):($log.error(response),$.modalAlert(response.data.message),$q.reject(response));window.location.reload()}},responseError:function(rejection){$log.error(rejection);var syserror=(rejection.statusText,"系统错误，请稍后再试！");return $.modalAlert(syserror),$q.reject(rejection)}}}];$httpProvider.interceptors.push(errorInterceptor)}])});